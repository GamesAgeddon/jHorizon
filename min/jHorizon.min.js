$.fn.jHorizon=function(){var d=$(this);if("undefined"!==typeof d.get(0)){d.css("overflow","hidden");var A=$(this).children(".jHorizon_content");(function(){function r(a){var b=e[1]+a;t=Math.ceil((t+a)/2);n(b)}function n(a){e[1]=Math.max(Math.min(a,u),0)}function h(a){return 0<u&&e[0]!=e[1]||a?(v?(a=-e[1],A.css({oTransform:"matrix(1,0,0,1,"+a+",0)",msTransform:"matrix(1,0,0,1,"+a+",0)",webkitTransform:"matrix(1,0,0,1,"+a+",0)",MozTransform:"matrix(1,0,0,1,"+a+",0)",transform:"matrix(1,0,0,1,"+a+",0)"})):
A.css({left:-e[1]+"px"}),e[0]=e[1],!0):!1}function G(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function B(){if(0!=k&&!g){var a=G();d.append("<div id='"+a+"' class='jHorizon_scrollbar jHorizon_scrollbar_horizontal' style='width: "+k+"px;'></div>");var b=$("#"+a);b.data("factor",l);b.draggable({axis:"x",containment:"parent",start:function(){w=!0},drag:function(a,c){n(Math.floor(b.data("factor")*b.position().left));
h(!1)},stop:function(){w=!1;C()}});return b}}function x(){if(!g){var a=d.width();if(m>a+2){var b=Math.floor(Math.pow(a,2)/m);l=m/a;return b}}return 0}function D(){"undefined"===typeof c||null===c||g||c.css("left",Math.floor(e[1]/c.data("factor")))}function C(){"undefined"===typeof c||null===c||w||y||c.hide()}function H(){p=setInterval(function(){r(t);h(!1)},10);setTimeout(function(){clearInterval(p)},500)}function v(){var a=!1,b=$("<div />").css({oTransform:"matrix(1,1,1,1,1,1)",msTransform:"matrix(1,1,1,1,1,1)",
webkitTransform:"matrix(1,1,1,1,1,1)",MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==b.attr("style")?a=!1:void 0!=b.attr("style")&&null!==c&&(a=!0);return a}function g(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}}var q=!1,f,E,F,t=0,p,v=v(),g=g(),z=!1,w=!1,l=1,y=!1,m=d.get(0).scrollWidth,u=m-d.innerWidth(),k=x(),c=B(),e=[0,0];d.bind(void 0!==window.onwheel?"wheel":void 0!==window.onmousewheel?"mousewheel":window.attachEvent?"onmousewheel":"DOMMouseScroll",
function(a){var b=a.originalEvent,b="undefined"!==typeof b.deltaY?b.deltaY:"undefined"!==typeof b.detail&&0!==b.detail?b.detail:-b.wheelDelta;r(0<b?144:-144);clearInterval(p);h(!1)&&(D(),a.preventDefault(),a.stopPropagation())});d.mouseenter(function(){g||(y=!0,"undefined"===typeof c||null===c||q||c.show())});d.parent().mouseleave(function(){g||(y=!1,C())});d.bind("touchstart",function(a){q=!0;f=[0,0];f[1]=a.originalEvent.touches[0].pageX;E=f[1]});$(document).bind("touchmove",function(a){if(q){f[0]=
f[1];f[1]=a.originalEvent.touches[0].pageX;F=Math.floor(f[0]-f[1]);var b=E-f[1];if(z||100<Math.abs(b))z=!0,r(F),clearInterval(p),h(!1)&&(a.preventDefault(),a.stopPropagation())}});d.bind("touchcancel touchend",function(a){z=q=!1;H()});$(window).resize(function(){setTimeout(function(){u=m-d.innerWidth();k=x();if("undefined"===typeof c||null===c)c=B();else if(!g){x();var a=c.data("factor");0!=k?(c.width(k),c.data("factor",l)):"undefined"!==typeof c&&null!==c&&(c.remove(),c=null,n(0),h(!0));n(Math.floor(Math.max(l,
a)/Math.min(l,a)*e[1]));h(!1);D()}},200)})})()}};